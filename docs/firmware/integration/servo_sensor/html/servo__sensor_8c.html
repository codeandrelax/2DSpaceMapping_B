<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Servo-sensor module: servo_sensor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Servo-sensor module
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">servo_sensor.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>File with code that controlls servo-sensor component.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa44e519f68ab22d530cd062dd7049fee" id="r_aa44e519f68ab22d530cd062dd7049fee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa44e519f68ab22d530cd062dd7049fee">initialize_servo_for_sensor</a> ()</td></tr>
<tr class="separator:aa44e519f68ab22d530cd062dd7049fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7799a5f0d85ef019453dfe5e24bb7d1" id="r_aa7799a5f0d85ef019453dfe5e24bb7d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7799a5f0d85ef019453dfe5e24bb7d1">set_servo_sensor_to_starting_pos</a> ()</td></tr>
<tr class="separator:aa7799a5f0d85ef019453dfe5e24bb7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0ff40e5886cd651113e8706b5ee772" id="r_a4f0ff40e5886cd651113e8706b5ee772"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f0ff40e5886cd651113e8706b5ee772">scan_space_with_sensor</a> ()</td></tr>
<tr class="separator:a4f0ff40e5886cd651113e8706b5ee772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e59225bfc4259591f302dc1b70f53a1" id="r_a5e59225bfc4259591f302dc1b70f53a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e59225bfc4259591f302dc1b70f53a1">initialize_ADC</a> ()</td></tr>
<tr class="separator:a5e59225bfc4259591f302dc1b70f53a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdef7a1fd863a6d3770c1268cb06add3" id="r_acdef7a1fd863a6d3770c1268cb06add3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acdef7a1fd863a6d3770c1268cb06add3">main</a> ()</td></tr>
<tr class="separator:acdef7a1fd863a6d3770c1268cb06add3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2c2701f20ed02c869667a8b8a89fb856" id="r_a2c2701f20ed02c869667a8b8a89fb856"><td class="memItemLeft" align="right" valign="top"><a id="a2c2701f20ed02c869667a8b8a89fb856" name="a2c2701f20ed02c869667a8b8a89fb856"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>sensor_reading</b> = 0</td></tr>
<tr class="separator:a2c2701f20ed02c869667a8b8a89fb856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac75d6c1ee02d7663369106613679a89f" id="r_ac75d6c1ee02d7663369106613679a89f"><td class="memItemLeft" align="right" valign="top"><a id="ac75d6c1ee02d7663369106613679a89f" name="ac75d6c1ee02d7663369106613679a89f"></a>
const unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>STOP_RANGE</b> = 300</td></tr>
<tr class="separator:ac75d6c1ee02d7663369106613679a89f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PWM variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Variables for setting PWM to different values, and thus controll servo-sensor. Declaring duty cycles and pwm_period variables which will be used for servo_sensor scanning </p>
</div></td></tr>
<tr class="memitem:a5202db193dfb4090fcbdbd1b1e8bfa0d" id="r_a5202db193dfb4090fcbdbd1b1e8bfa0d"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5202db193dfb4090fcbdbd1b1e8bfa0d">pwm_period</a> = 0</td></tr>
<tr class="separator:a5202db193dfb4090fcbdbd1b1e8bfa0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab752277653bf4ca366fd22ad687edb9a" id="r_ab752277653bf4ca366fd22ad687edb9a"><td class="memItemLeft" align="right" valign="top"><a id="ab752277653bf4ca366fd22ad687edb9a" name="ab752277653bf4ca366fd22ad687edb9a"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>duty_cycle</b> = 0</td></tr>
<tr class="separator:ab752277653bf4ca366fd22ad687edb9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5fdc2661bb72a7173e58f2c9dca677" id="r_a1a5fdc2661bb72a7173e58f2c9dca677"><td class="memItemLeft" align="right" valign="top"><a id="a1a5fdc2661bb72a7173e58f2c9dca677" name="a1a5fdc2661bb72a7173e58f2c9dca677"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>duty_cycles</b> [] = {2.0, 4.7, 7.5, 10.2, 13.0}</td></tr>
<tr class="separator:a1a5fdc2661bb72a7173e58f2c9dca677"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File with code that controlls servo-sensor component. </p>
<p>This file is a step into integration of the components of the system. It has a code that controlls servo-sensor. What is does is the following:</p><ul>
<li>it initialies PWM module of microcontroller,</li>
<li>sets appropriate pins,</li>
<li>sets one pin to be analog pin, and sets AD convertor to convert sersnor analog value to a digital one which will be used in program,</li>
<li>defines a functions which can scan the space by moving the servo around, and in each position it takes sensor value. </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5e59225bfc4259591f302dc1b70f53a1" name="a5e59225bfc4259591f302dc1b70f53a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e59225bfc4259591f302dc1b70f53a1">&#9670;&#160;</a></span>initialize_ADC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_ADC </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that initializes ADC needed for sensor reading </p>
<p>Init ADC to use 10-bit module, and use Internal voltage reference(AVDD, AVSS)</p>

</div>
</div>
<a id="aa44e519f68ab22d530cd062dd7049fee" name="aa44e519f68ab22d530cd062dd7049fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa44e519f68ab22d530cd062dd7049fee">&#9670;&#160;</a></span>initialize_servo_for_sensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_servo_for_sensor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that initializes servo_sensor, by setting a PWM pin, and configures PWM. </p>
<p>set pin RB14 to work in open drain configuration</p>
<p>set up PWM pin, RB(P)14 <br  />
</p>
<p>get PWM period for duty cycle count</p>
<p>set 50Hz period, channel 1, no prescaler, timer 2</p>

</div>
</div>
<a id="acdef7a1fd863a6d3770c1268cb06add3" name="acdef7a1fd863a6d3770c1268cb06add3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdef7a1fd863a6d3770c1268cb06add3">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void main </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main function, entry point of the program </p>

</div>
</div>
<a id="a4f0ff40e5886cd651113e8706b5ee772" name="a4f0ff40e5886cd651113e8706b5ee772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f0ff40e5886cd651113e8706b5ee772">&#9670;&#160;</a></span>scan_space_with_sensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scan_space_with_sensor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function that moves servo_sensor 180 degrees and stores sensor reading from different positions Moving the servo is done in for loop, by changing PWM duty cycles with some delay because of the limits of servo motor. </p>
<p>always return sensor to face front</p>

</div>
</div>
<a id="aa7799a5f0d85ef019453dfe5e24bb7d1" name="aa7799a5f0d85ef019453dfe5e24bb7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7799a5f0d85ef019453dfe5e24bb7d1">&#9670;&#160;</a></span>set_servo_sensor_to_starting_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_servo_sensor_to_starting_pos </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Functions that sets servo to its starting position, by setting appropriate duty cycle of the PWM </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5202db193dfb4090fcbdbd1b1e8bfa0d" name="a5202db193dfb4090fcbdbd1b1e8bfa0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5202db193dfb4090fcbdbd1b1e8bfa0d">&#9670;&#160;</a></span>pwm_period</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned pwm_period = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Declaring duty cycles which will be used for servo_sensor scanning </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
