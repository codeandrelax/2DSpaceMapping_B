<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Driving algorithm: servo_sensor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Driving algorithm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">servo_sensor.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>File containing function definitions for servo_sensor module. This file contains function definitions of functions that are used for controlling the servo_sensor component of the vehicle, and also some variables needed in that process. There are functions for for initializing servo_sensor, that is setting PWM pins, and values on that pins, and alse setting appropriate pin to analog for taking the input from sensor and AD convertor. Also there is function for scanning the space with sensor. This implies setting servo in several positions and taking the value of the IR Distance sensor attached to servo in that position, and saving it in some variables.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="servo__sensor_8h_source.html">servo_sensor.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2b4a49439247f790c4482f60394ba9b2" id="r_a2b4a49439247f790c4482f60394ba9b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b4a49439247f790c4482f60394ba9b2">SENSOR_POSITIONS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a2b4a49439247f790c4482f60394ba9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a2cb7952db3a36a5d8ca726e20faa2" id="r_a21a2cb7952db3a36a5d8ca726e20faa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21a2cb7952db3a36a5d8ca726e20faa2">FRONT_POSITIONS</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a21a2cb7952db3a36a5d8ca726e20faa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3faf7dbbb704d8591443abacfb33642e" id="r_a3faf7dbbb704d8591443abacfb33642e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3faf7dbbb704d8591443abacfb33642e">initialize_servo_sensor</a> ()</td></tr>
<tr class="memdesc:a3faf7dbbb704d8591443abacfb33642e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for initializing servo-sensor module.  <br /></td></tr>
<tr class="separator:a3faf7dbbb704d8591443abacfb33642e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7799a5f0d85ef019453dfe5e24bb7d1" id="r_aa7799a5f0d85ef019453dfe5e24bb7d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7799a5f0d85ef019453dfe5e24bb7d1">set_servo_sensor_to_starting_pos</a> ()</td></tr>
<tr class="memdesc:aa7799a5f0d85ef019453dfe5e24bb7d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for setting servo-sensor module to starting position.  <br /></td></tr>
<tr class="separator:aa7799a5f0d85ef019453dfe5e24bb7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0ff40e5886cd651113e8706b5ee772" id="r_a4f0ff40e5886cd651113e8706b5ee772"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f0ff40e5886cd651113e8706b5ee772">scan_space_with_sensor</a> ()</td></tr>
<tr class="memdesc:a4f0ff40e5886cd651113e8706b5ee772"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for scanning the space with servo-sensor module.  <br /></td></tr>
<tr class="separator:a4f0ff40e5886cd651113e8706b5ee772"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afa41d04ca4d128e4e1be93938ca13f68" id="r_afa41d04ca4d128e4e1be93938ca13f68"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa41d04ca4d128e4e1be93938ca13f68">sensor_values</a> [<a class="el" href="#a2b4a49439247f790c4482f60394ba9b2">SENSOR_POSITIONS</a>] = {0}</td></tr>
<tr class="separator:afa41d04ca4d128e4e1be93938ca13f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff4e68a02eb46b407b6b443fa3a8df7" id="r_adff4e68a02eb46b407b6b443fa3a8df7"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adff4e68a02eb46b407b6b443fa3a8df7">sensor_values_processed</a> [DIRECTIONS] = {0}</td></tr>
<tr class="memdesc:adff4e68a02eb46b407b6b443fa3a8df7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array in which sensor values are store.  <br /></td></tr>
<tr class="separator:adff4e68a02eb46b407b6b443fa3a8df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d013a4d82d3c9b416434be468c7423c" id="r_a2d013a4d82d3c9b416434be468c7423c"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d013a4d82d3c9b416434be468c7423c">sensor_value_1</a></td></tr>
<tr class="separator:a2d013a4d82d3c9b416434be468c7423c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcc877b0ffd1e35a77899bd00e47ac7" id="r_a5bcc877b0ffd1e35a77899bd00e47ac7"><td class="memItemLeft" align="right" valign="top"><a id="a5bcc877b0ffd1e35a77899bd00e47ac7" name="a5bcc877b0ffd1e35a77899bd00e47ac7"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>sensor_value_2</b></td></tr>
<tr class="separator:a5bcc877b0ffd1e35a77899bd00e47ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8b4484d33c72098baf8b584c23ddc5" id="r_a1d8b4484d33c72098baf8b584c23ddc5"><td class="memItemLeft" align="right" valign="top"><a id="a1d8b4484d33c72098baf8b584c23ddc5" name="a1d8b4484d33c72098baf8b584c23ddc5"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>sensor_value_3</b> = 0</td></tr>
<tr class="separator:a1d8b4484d33c72098baf8b584c23ddc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a541ac4d1bbceb7037a592c8cbc3541eb" id="r_a541ac4d1bbceb7037a592c8cbc3541eb"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a541ac4d1bbceb7037a592c8cbc3541eb">front_reading</a> [<a class="el" href="#a21a2cb7952db3a36a5d8ca726e20faa2">FRONT_POSITIONS</a>] = {0}</td></tr>
<tr class="memdesc:a541ac4d1bbceb7037a592c8cbc3541eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array in which fron sensor values are store.  <br /></td></tr>
<tr class="separator:a541ac4d1bbceb7037a592c8cbc3541eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PWM variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Variables for setting PWM to different values, and thus controll servo-sensor </p>
</div></td></tr>
<tr class="memitem:a5202db193dfb4090fcbdbd1b1e8bfa0d" id="r_a5202db193dfb4090fcbdbd1b1e8bfa0d"><td class="memItemLeft" align="right" valign="top"><a id="a5202db193dfb4090fcbdbd1b1e8bfa0d" name="a5202db193dfb4090fcbdbd1b1e8bfa0d"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>pwm_period</b> = 0</td></tr>
<tr class="separator:a5202db193dfb4090fcbdbd1b1e8bfa0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab752277653bf4ca366fd22ad687edb9a" id="r_ab752277653bf4ca366fd22ad687edb9a"><td class="memItemLeft" align="right" valign="top"><a id="ab752277653bf4ca366fd22ad687edb9a" name="ab752277653bf4ca366fd22ad687edb9a"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>duty_cycle</b> = 0</td></tr>
<tr class="separator:ab752277653bf4ca366fd22ad687edb9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5fdc2661bb72a7173e58f2c9dca677" id="r_a1a5fdc2661bb72a7173e58f2c9dca677"><td class="memItemLeft" align="right" valign="top"><a id="a1a5fdc2661bb72a7173e58f2c9dca677" name="a1a5fdc2661bb72a7173e58f2c9dca677"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>duty_cycles</b> [] = {2.0, 2.9, 4.9, 5.8, 7.9, 8.8, 10.5, 11.4, 12.1, 13.5}</td></tr>
<tr class="separator:a1a5fdc2661bb72a7173e58f2c9dca677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6456c089ae4a4ecedcdc9d3c2d6779c" id="r_af6456c089ae4a4ecedcdc9d3c2d6779c"><td class="memItemLeft" align="right" valign="top"><a id="af6456c089ae4a4ecedcdc9d3c2d6779c" name="af6456c089ae4a4ecedcdc9d3c2d6779c"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>front_duty_cycles</b> [] = {6.0, 7.5, 9.0}</td></tr>
<tr class="separator:af6456c089ae4a4ecedcdc9d3c2d6779c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File containing function definitions for servo_sensor module. This file contains function definitions of functions that are used for controlling the servo_sensor component of the vehicle, and also some variables needed in that process. There are functions for for initializing servo_sensor, that is setting PWM pins, and values on that pins, and alse setting appropriate pin to analog for taking the input from sensor and AD convertor. Also there is function for scanning the space with sensor. This implies setting servo in several positions and taking the value of the IR Distance sensor attached to servo in that position, and saving it in some variables. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a21a2cb7952db3a36a5d8ca726e20faa2" name="a21a2cb7952db3a36a5d8ca726e20faa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a2cb7952db3a36a5d8ca726e20faa2">&#9670;&#160;</a></span>FRONT_POSITIONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FRONT_POSITIONS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of servo-sensor front positions </p>

</div>
</div>
<a id="a2b4a49439247f790c4482f60394ba9b2" name="a2b4a49439247f790c4482f60394ba9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b4a49439247f790c4482f60394ba9b2">&#9670;&#160;</a></span>SENSOR_POSITIONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SENSOR_POSITIONS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of servo-sensor positions, that is how many different PWMs are </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3faf7dbbb704d8591443abacfb33642e" name="a3faf7dbbb704d8591443abacfb33642e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3faf7dbbb704d8591443abacfb33642e">&#9670;&#160;</a></span>initialize_servo_sensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_servo_sensor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for initializing servo-sensor module. </p>
<p>This function is used for initialising servo-sensor module. It should be called at the begining of the program, before module is used in the rest of the program. </p>

</div>
</div>
<a id="a4f0ff40e5886cd651113e8706b5ee772" name="a4f0ff40e5886cd651113e8706b5ee772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f0ff40e5886cd651113e8706b5ee772">&#9670;&#160;</a></span>scan_space_with_sensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scan_space_with_sensor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for scanning the space with servo-sensor module. </p>
<p>This function is used for scanning the space with servo-sensor module. After the vehicle is stopped because of obstacle, this function is called. It scans the space around, takes the values, and saves them. Based on that values, the vehicle decides in which direction it drives. </p>

</div>
</div>
<a id="aa7799a5f0d85ef019453dfe5e24bb7d1" name="aa7799a5f0d85ef019453dfe5e24bb7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7799a5f0d85ef019453dfe5e24bb7d1">&#9670;&#160;</a></span>set_servo_sensor_to_starting_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_servo_sensor_to_starting_pos </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for setting servo-sensor module to starting position. </p>
<p>This function sets servo-sensor to starting position, which is facing straight forward. It is called each time after scanning the space, and before moving forward. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a541ac4d1bbceb7037a592c8cbc3541eb" name="a541ac4d1bbceb7037a592c8cbc3541eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541ac4d1bbceb7037a592c8cbc3541eb">&#9670;&#160;</a></span>front_reading</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned front_reading[<a class="el" href="#a21a2cb7952db3a36a5d8ca726e20faa2">FRONT_POSITIONS</a>] = {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array in which fron sensor values are store. </p>
<p>Array that store sensor values in front positions of the servo_sensor </p>

</div>
</div>
<a id="a2d013a4d82d3c9b416434be468c7423c" name="a2d013a4d82d3c9b416434be468c7423c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d013a4d82d3c9b416434be468c7423c">&#9670;&#160;</a></span>sensor_value_1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned sensor_value_1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Values to store 3 measurements in each sensor positions </p>

</div>
</div>
<a id="afa41d04ca4d128e4e1be93938ca13f68" name="afa41d04ca4d128e4e1be93938ca13f68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa41d04ca4d128e4e1be93938ca13f68">&#9670;&#160;</a></span>sensor_values</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned sensor_values[<a class="el" href="#a2b4a49439247f790c4482f60394ba9b2">SENSOR_POSITIONS</a>] = {0}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Array that store sensor values in each position of the sensor </p>

</div>
</div>
<a id="adff4e68a02eb46b407b6b443fa3a8df7" name="adff4e68a02eb46b407b6b443fa3a8df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adff4e68a02eb46b407b6b443fa3a8df7">&#9670;&#160;</a></span>sensor_values_processed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned sensor_values_processed[DIRECTIONS] = {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array in which sensor values are store. </p>
<p>Array that store sensor values after processing, each values in this array is associated with one driving direction </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
